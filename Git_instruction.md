![Git logo](Git_logo.png)

# Работа с Git

## 1. Проверка наличия установленного Git

В терминале выполнить команду `git version`.
Если Git установлен, появиться сообщение с информацией о версии программы. Иначе будет сообщение об ошибке.

## 2. Установка Git

Загружаем последнюю версию Git с https://git-scm.com/downloads.

## 3. Настройка Git

При первом использовании Git необходимо представиться. Для этого в терминале нужно внести две команды:
```
git config --global user.name "Ваше имя"
git config --global user.email email@example.com
```

## 4. Инициализация репозитория
Для того чтобы инициализировать репозиторий в терминале необходимо выполнить следующую команду:
>git init

## 5. Запись изменений в репозиторий

Для определения состояния файлов используется команда `git status`. Она *показывает в каком статусе находятся файлы (неотслеживаемые, измененные, подготовленные для коммита, без изменения и т.п.)*. Для более компактного вывода информации о статусе можно использовать команду `git status -s`.

Чтобы посмотреть сами изменения, а не изменённые файлы, можно использовать следующие команды:

* __git diff__ - *показывает, что мы изменили в файле, но еще не проиндексировали*. Происходит сравнение содержимого рабочего каталога с содержимым индекса (областью подгтовленных для последующей фиксации файлов).

* __git diff --staged__ - *показывает, что мы проиндексировали и собираемся включить в коммит*. Происходит сравнение проиндексированных изменений с последним коммитом.

Также для работы с репозиторием используются такие команды, как:
* __git add [название файла]__ - *подготавливает файлы для последующей фиксации изменений*. Данная команда позволяет: 
    * отслеживать новые файлы, ранее не отслеживаемые (untracked files -> new file)
    * индексировать изменения (подготавливать к фиксации) в уже отслеживаемом файле (modified files):

        ![git_status_modifield_for_add](git_status_modifield_for_add.PNG)

        ![git_status_modifield_after_add](git_status_modifield_after_add.PNG)

* __git commit__ - *фиксирует изменения в файле, для ввода сообщения коммита открывает текстовый редактор*. Эта команда принимает несколько аргументов:
    * __-m__ - позволяет написать сообщение вместе с командой, не открывая редактор. Например:
        > `git commit -m "Добавлен раздел"`
    *  __-a__ - позволяет пропустить `git add` перед коммитом, но при этом фиксируются все измененные файлы, которые есть в репозитории, а не какой-то конкретный файл
    * __--amend__ - позволяет перезаписать последний коммит

## 6. Просмотр истории коммитов

Для просмотра истории предыдущих коммитов в обратном хронологическом порядке можно использовать команду `git log`. По каждому из коммитов команда выводит информацию об имени, авторе, дате создания, комментарии. Например:

![git_log_example](git_log_image.PNG)

Также команду `git log` можно использовать со следующими опциями:
>--graph - отображает ASCII граф с ветвлениями и историей слияния

>--oneline - выводит сокращенную версию git log

## 7. Перемещение между сохранениями

Перемещение между коммитами осуществляется с помощью команды `git checkout`.  После данной команды необходимо указать хеш-код от 4 символов, на который необходимо перейти. Например:
 ```
 git checkout e951
 ```
  Команда выше осуществляет переход на коммит с хеш-кодом "e951". Для возврата в основную ветку необходимо ввести команду **`git checkout master`**.

  ## 8. Игнорирование файлов
  
Git позволяет игнорировать файлы, которые не имеет смысла добавлять добавлять в репозиторий, но и видеть в списках неотслеживаемых не хочется. Для того нужно создать отдельный файл: `.gitignore`. Это простой текстовый файл, в каждой строке которого содержится шаблон файла или каталога, который необходимо проигнорировать.
В нашем случае это будут картинки с расширением *png* :

![git_ignor_example](git_ignor_example.PNG)

## 9. Создание веток в Git

Ветка в Git - это простой перемещаемый указатель на один из коммитов, обычно последний в цепочке комитов.
По умолчанию имя основной ветки в Git - master.
Создать ветку можно командой:
```
git branch <имя новой ветки>
```
Чтобы при создании ветки сразу на нее переключиться, используется команда `git checkout -b <имя новой ветки>`.

В результате создается новый указатель на текущий коммит.

Список веток в репозитории можно посмотреть с помощью команды `git branch`.

## 10. Слияние веток

Для слияния веток необходимо сначала перейти в основную ветку (в нашем случае master), затем выполнить команду `git merge <название ветки>`.
Для отмены слияния веток, есть команда `git merge –abort`. Но она работает только в том случае, если ветки слиты, но еще не зафиксированы.  

## 11. Разрешение конфликтов при слиянии веток

При слиянии веток, в которых была изменена одна и та же часть одного и того же файла, возникнет конфликт.
Для разрешения конфликта Git предложит варианты действий:

1. Принять данные основной ветки
2. Принять данные из другой ветки, с которой происходит слияние
3. Принять данные обеих веток

Также есть вариант сравнить обе ветки и выбрать одно из действий, описанных выше.

![git_conflict_branches](git_conflict_branches2.PNG)

После того как разрешили конфликт файл будет иметь статус "оба изменили":

![git_both_modified](git_both_modified.PNG)
 Нужно будет закоммитить изменения в файле.

## 12. Удаление веток

Для того чтобы удалить ненужную после слияния ветку используется команда:
```
git branch -d <имя ветки>
```
Но она работает не во всех случаях.
Если в ветке присутствуют несмерженные изменения, флаг **-d** не позволит удалить такую ветку.
В таком случае нужно воспользоваться командой:
```
git branch -D <имя ветки>
```
Данная команда принудительно удаляет ветку, вне зависимости от ее статуса мержа.

Использовать данную команду нужно с осторожностью и только когда абсолютно уверены, что хотите удалить ветку.

`Обратите внимание, нельзя удалить ветку, если в ней находишься!`

## 13. Работа с удаленными репозиториями
## 13.1. Начало работы  
Для того чтобы начать работать с удаленным репозиторием необходимо:
1. Создать аккуаунт на [GitHub](https://github.com)
2. Создать удаленный репозиторий
3. Создать локальный репозиторий
4. Связать удаленный репозиторий с локальным:

    `git remote add origin [адрес удаленного репозитория - https://... .git]`

5. Отправить содержимое локального репозитория в удаленный (может потребоваться авторизация с GitHub) с помощью команды:
    >git push
6. Скачать последние изменения (одновоременно со слиянием веток) с удаленного репозитория в локальный можно с помощью команды:
    >git pull

## 13.2. Просмотр удаленных репозиториев

Для просмотра информации о настроенных удалённых репозиториев используются следующие команды:

>`git remote` - выводит названия доступных удалённых репозиториев

>`git remote -v` - выводит адреса для чтения и записи, привязанные к репозиторию

## 13.3. Добавление удалённых репозиториев

Для того чтобы добавить удалённый репозиторий и присвоить ему имя, просто выполните команду:
>git remote add <имя> <ссылка на удаленный репозиторий>:

## 13.4 Получение изменений из удалённого репозитория

Получить данные из удалённых репозиториев можно с помощью одной из следующих команд:

>`git fetch [remote-name]` - забирает данные в локальный репозиторий, но не сливает изменения

>`git pull` - забирает данные в локальный репозиторий и автоматически пытается слить изменения (merge)

##  13.5. Отправка изменений в удаленный репозиторий

Для того чтобы отправить изменения с локального репозитория на удаленный, используйте команду:

>git push

##  13.6.Клонирование существующего репозитория
Для получения локальной копии удаленного репозитория воспользуйтесь командой:
>`git clone <ссылка на репозиторий>`

## 13.7. Pull request
Для того чтобы вносить свой вклад в уже существующие проекты, в которых у нас нет прав на внесения изменений путем отправки (push) изменений, можно создать свое собственное ответвление (fork) проекта, т.е. GitHub создаст в нашем аккаунте свою собственную копию нужного нам проекта, в которой можно легко делать изменения путём отправки (push) изменений.

**Алгоритм работы pull request**

``` 
1. В своём аккаунте на GitHub создаем копию нужного нам репозитория с помощью кнопки "Fork".
2. Делаем clone своей версии репозитории на локальный компьютер/связываем удаленным репозиторий с локальным.
3. Создаем новую ветку и вносим в нее свои изменения.
4. Фиксируем изменения (делаем коммиты).
5. Отправляем свою версию на GitHub (push).
6. На сайте GitHub нажимаем кнопку Pull request (указываем по необходимости комментарий).

